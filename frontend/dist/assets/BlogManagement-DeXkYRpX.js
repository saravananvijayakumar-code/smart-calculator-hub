import{r as e,j as t}from"./ui-DlaF13aT.js";import{a2 as s,m as a}from"./index-Bz8mWo3A.js";import{P as r}from"./plus-8wPMdtHD.js";import{S as i}from"./square-pen-Bw_IsG40.js";import{T as l}from"./trash-2-BKaciHhd.js";import{L as n}from"./router-CpKuIDSt.js";import"./vendor-DjPCVcPo.js";import"./charts-DCG9Wh5P.js";function d(){const[d,x]=e.useState([]),[c,o]=e.useState(!0),[m,p]=e.useState("");e.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0);const e=await s.blog.list({limit:100});x(e.posts)}catch(e){p("Failed to load blog posts"),console.error(e)}finally{o(!1)}};return c?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(a,{className:"w-8 h-8 animate-spin text-indigo-600"})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Blog Management"}),t.jsxs(n,{to:"/admin/blog/new",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[t.jsx(r,{className:"w-4 h-4 mr-2"}),"New Post"]})]}),m&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:m}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Author"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-500",children:e.author||"-"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.published?"Published":"Draft"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[t.jsx(n,{to:`/admin/blog/edit/${e.slug}`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:t.jsx(i,{className:"w-4 h-4 inline"})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this post?"))try{await s.blog.remove({slug:e}),x(d.filter(t=>t.slug!==e))}catch(t){p("Failed to delete post"),console.error(t)}})(e.slug),className:"text-red-600 hover:text-red-900",children:t.jsx(l,{className:"w-4 h-4 inline"})})]})]},e.id))})]}),0===d.length&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:"No blog posts yet. Create your first post!"})]})]})})}export{d as default};
