import{r as e,j as s}from"./ui-DlaF13aT.js";import{l as a,f as r,j as t,m as l,o as d,B as i,g as n,h as o,U as c,T as m,a2 as x}from"./index-Bz8mWo3A.js";import{B as h}from"./badge-Yxso3t7Q.js";import{B as g}from"./brain-vGshZRXr.js";import{T as b}from"./target-CY0nPYCc.js";import{C as u}from"./circle-check-big-DxDlI_ih.js";import{A as j}from"./arrow-right-D57XUs3i.js";import{L as p}from"./lightbulb-BwMXLTZP.js";
/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=a("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function f({calculatorType:a,data:f,userContext:y,onAnalysisComplete:w,className:v=""}){const[k,I]=e.useState(null),[A,M]=e.useState(!1),[S,T]=e.useState(null),C=e.useRef(null),G=e.useRef(""),Z=async()=>{M(!0),T(null);try{console.log("Calling AI analysis with:",{calculatorType:a,data:f,userContext:y});const e=await x.ai_analysis.analyze({calculatorType:a,data:f,userContext:y});if(console.log("AI Analysis result:",e),!e)return console.error("No result received from AI analysis"),void T("No analysis data received. Please try again.");if(!(e.summary||e.recommendations&&0!==e.recommendations.length))return console.error("Empty analysis received:",e),void T("Received empty analysis. Please try again.");I(e),null==w||w(e)}catch(e){console.error("AI Analysis error:",e),T(`Failed to generate analysis: ${e instanceof Error?e.message:"Unknown error"}. Please try again.`)}finally{M(!1)}};e.useEffect(()=>{const e=JSON.stringify({calculatorType:a,data:f,userContext:y});if(e!==G.current)return G.current=e,C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{Z()},1500),()=>{C.current&&clearTimeout(C.current)}},[a,JSON.stringify(f),JSON.stringify(y)]);const z=e=>{switch(e){case"optimization":return s.jsx(m,{className:"h-5 w-5"});case"warning":return s.jsx(d,{className:"h-5 w-5"});case"opportunity":return s.jsx(b,{className:"h-5 w-5"});case"risk":return s.jsx(N,{className:"h-5 w-5"});default:return s.jsx(p,{className:"h-5 w-5"})}};return A?s.jsx(r,{className:`border-0 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white ${v}`,children:s.jsxs(t,{className:"flex flex-col items-center justify-center py-16",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-2xl animate-pulse"}),s.jsx(l,{className:"h-16 w-16 animate-spin text-white drop-shadow-lg relative z-10"})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("p",{className:"font-bold text-2xl drop-shadow-md",children:"Generating AI Analysis..."}),s.jsx("p",{className:"text-white/80 text-sm",children:"Analyzing your data with advanced AI models"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})]})}):S?s.jsx(r,{className:`border-0 bg-gradient-to-br from-red-500 to-rose-600 text-white ${v}`,children:s.jsx(t,{className:"py-8",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-full",children:s.jsx(d,{className:"h-12 w-12"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-xl mb-2",children:"Analysis Failed"}),s.jsx("p",{className:"text-white/90",children:S})]}),s.jsxs(i,{onClick:Z,className:"bg-white text-red-600 hover:bg-white/90 shadow-lg hover:shadow-xl transition-all",size:"lg",children:[s.jsx(g,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})}):s.jsxs("div",{className:`space-y-6 ${v}`,children:[s.jsxs(r,{className:"border-0 bg-gradient-to-br from-violet-600 via-purple-600 to-indigo-600 text-white overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDM0djItMnptMCAzdjItMnptLTIgMGgyLTJ6bTAgMGgyLTJ6bS0yIDBoMi0yem0wLTNoMi0yem0yIDB2Mi0yem0wLTN2Mi0yem0tMiAwaDItMnoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-10"}),s.jsx(n,{className:"relative z-10",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-sm rounded-xl",children:s.jsx(g,{className:"h-6 w-6"})}),s.jsx(o,{className:"text-2xl font-bold",children:"AI Analysis Summary"}),s.jsx("div",{className:"ml-auto",children:s.jsxs(h,{className:"bg-white/20 backdrop-blur-sm border-white/30 text-white",children:[s.jsx(c,{className:"w-3 h-3 mr-1"}),"AI Generated"]})})]})}),s.jsx(t,{className:"relative z-10",children:s.jsx("p",{className:"text-white/95 leading-relaxed text-lg",children:null==k?void 0:k.summary})})]}),(null==k?void 0:k.recommendations)&&k.recommendations.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(b,{className:"h-6 w-6 text-primary"}),s.jsx("h3",{className:"text-2xl font-bold",children:"Personalized Recommendations"})]}),k.recommendations.map((e,a)=>{const l=(e=>{switch(e){case"high":return{badge:"bg-gradient-to-r from-red-500 to-pink-500 text-white border-0",card:"border-red-200 bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-950/30 dark:to-pink-950/30",icon:"text-red-600 dark:text-red-400"};case"medium":return{badge:"bg-gradient-to-r from-orange-500 to-yellow-500 text-white border-0",card:"border-orange-200 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-950/30 dark:to-yellow-950/30",icon:"text-orange-600 dark:text-orange-400"};case"low":return{badge:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0",card:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30",icon:"text-green-600 dark:text-green-400"};default:return{badge:"bg-gradient-to-r from-gray-500 to-slate-500 text-white border-0",card:"border-gray-200 bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-950/30 dark:to-slate-950/30",icon:"text-gray-600 dark:text-gray-400"}}})(e.priority);return s.jsx(r,{className:`${l.card} border-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] overflow-hidden`,children:s.jsxs(t,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2.5 bg-white dark:bg-gray-900 rounded-xl shadow-md ${l.icon}`,children:z(e.type)}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-xl text-foreground",children:e.title}),e.estimatedImpact&&s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:e.estimatedImpact})]})]}),s.jsx(h,{className:`${l.badge} text-sm font-semibold px-3 py-1 shadow-md`,children:e.priority.toUpperCase()})]}),s.jsx("p",{className:"text-foreground/90 mb-4 leading-relaxed",children:e.description}),e.potentialSavings&&s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl p-4 mb-4 shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(m,{className:"h-5 w-5"}),s.jsx("span",{className:"font-bold text-lg",children:"Potential Savings"})]}),s.jsxs("span",{className:"text-2xl font-bold",children:["$",e.potentialSavings.toLocaleString()]})]})}),e.actionItems.length>0&&s.jsxs("div",{className:"bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm rounded-xl p-4 border border-white/60 dark:border-gray-700/60",children:[s.jsxs("h5",{className:"font-bold text-foreground mb-3 flex items-center gap-2",children:[s.jsx(u,{className:"h-4 w-4"}),"Action Items:"]}),s.jsx("ul",{className:"space-y-2.5",children:e.actionItems.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-2.5 text-foreground/90",children:[s.jsx("div",{className:"mt-0.5 p-1 bg-primary/20 rounded-full",children:s.jsx(j,{className:"h-3.5 w-3.5 text-primary"})}),s.jsx("span",{className:"flex-1",children:e})]},a))})]})]})},a)})]}),(null==k?void 0:k.keyInsights)&&k.keyInsights.length>0&&s.jsxs(r,{className:"border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/30 dark:to-cyan-950/30 shadow-lg",children:[s.jsx(n,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500 text-white rounded-xl shadow-md",children:s.jsx(p,{className:"h-5 w-5"})}),s.jsx(o,{className:"text-2xl font-bold text-foreground",children:"Key Insights"})]})}),s.jsx(t,{children:s.jsx("ul",{className:"space-y-3",children:k.keyInsights.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-3 p-3 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx(u,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-foreground/90 leading-relaxed",children:e})]},a))})})]}),(null==k?void 0:k.riskFactors)&&k.riskFactors.length>0&&s.jsxs(r,{className:"border-2 border-orange-200 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/30 dark:to-red-950/30 shadow-lg",children:[s.jsx(n,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-500 text-white rounded-xl shadow-md",children:s.jsx(N,{className:"h-5 w-5"})}),s.jsx(o,{className:"text-2xl font-bold text-foreground",children:"Risk Factors"})]})}),s.jsx(t,{children:s.jsx("ul",{className:"space-y-3",children:k.riskFactors.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-3 p-3 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm rounded-lg border border-orange-200 dark:border-orange-800",children:[s.jsx(d,{className:"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-foreground/90 leading-relaxed",children:e})]},a))})})]}),(null==k?void 0:k.nextSteps)&&k.nextSteps.length>0&&s.jsxs(r,{className:"border-2 border-emerald-200 bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/30 dark:to-green-950/30 shadow-lg",children:[s.jsx(n,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500 text-white rounded-xl shadow-md",children:s.jsx(m,{className:"h-5 w-5"})}),s.jsx(o,{className:"text-2xl font-bold text-foreground",children:"Next Steps"})]})}),s.jsx(t,{children:s.jsx("ul",{className:"space-y-3",children:k.nextSteps.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-3 p-3 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm rounded-lg border border-emerald-200 dark:border-emerald-800 hover:bg-white/80 dark:hover:bg-gray-900/80 transition-colors",children:[s.jsx("div",{className:"p-1.5 bg-emerald-500 text-white rounded-full mt-0.5",children:s.jsx("span",{className:"text-xs font-bold",children:a+1})}),s.jsx("span",{className:"text-foreground/90 leading-relaxed flex-1",children:e}),s.jsx(j,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400 flex-shrink-0 mt-0.5"})]},a))})})]})]})}export{f as E,N as S};
