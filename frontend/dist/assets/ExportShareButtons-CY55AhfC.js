import{r as e,j as t}from"./ui-DlaF13aT.js";import{v as a,f as n,j as s,B as r,y as i,z as o,E as l,J as c,a6 as d,m,M as h}from"./index-Bz8mWo3A.js";import{S as u}from"./share-2-Bp1Vuz92.js";import{L as p}from"./link-1jMZnk74.js";import{C as x}from"./copy-CDWVSltH.js";import{T as f}from"./twitter-IUt_35nN.js";import{F as w}from"./facebook-CbnFxiAZ.js";import{L as g}from"./linkedin-2JhAyUC6.js";import{M as y}from"./message-circle-G7WeW1Z2.js";import{M as b}from"./mail-DXb2_H96.js";function j({calculatorType:j,inputs:$,results:S,analysis:k,title:v,className:N=""}){const[C,L]=e.useState(!1),[R,T]=e.useState(!1),{toast:F}=a(),I="undefined"!=typeof window?window.location.href:"",U=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),P=v||U(j),D=()=>{if(j.includes("mortgage"))return S.monthlyPayment?`$${S.monthlyPayment}/month`:"";if(j.includes("loan"))return S.monthlyPayment?`$${S.monthlyPayment}/month`:"";if(j.includes("investment")||j.includes("retirement"))return S.finalAmount?`$${S.finalAmount.toLocaleString()} projected`:"";if("bmi"===j)return S.bmi?`BMI: ${S.bmi}`:"";if("income-tax-australia"===j){const e=S.effectiveTaxRate?`${S.effectiveTaxRate.toFixed(1)}%`:"",t=S.netIncome?`$${Math.round(S.netIncome).toLocaleString()} net`:"";return e&&t?`${e} effective rate, ${t}`:""}return j.includes("tax")?S.totalTax?`$${Math.round(S.totalTax).toLocaleString()} tax`:"":j.includes("superannuation")||j.includes("super")?S.finalBalance?`$${Math.round(S.finalBalance).toLocaleString()} at retirement`:"":j.includes("cgt")&&S.cgtLiability?`$${Math.round(S.cgtLiability).toLocaleString()} CGT`:""},M=()=>{const e=["SmartCalculator","FinancialPlanning"];return j.includes("tax")?[...e,"Tax","TaxPlanning"]:j.includes("mortgage")||j.includes("loan")?[...e,"Mortgage","HomeLoan","Finance"]:j.includes("investment")||j.includes("retirement")?[...e,"Investment","Retirement","WealthBuilding"]:j.includes("health")||j.includes("bmi")||j.includes("bmr")?["Health","Fitness","Wellness","HealthCalculator"]:j.includes("insurance")?[...e,"Insurance","Protection"]:e},A=()=>{const e=U(j),t=D();return`I just calculated my ${e.toLowerCase()}${t?`: ${t}`:""}. Check out this calculator!`},B=()=>{const e=U(j),t=D(),a=M().map(e=>`#${e}`).join(" ");return`ðŸ“Š ${e}\n\n${t?`Results: ${t}\n\n`:""}Try it yourself: ${I}\n\n${a}`},O=e=>{const t=A(),a=B(),n=encodeURIComponent(t),s=encodeURIComponent(a),r=encodeURIComponent(I),i=encodeURIComponent(P),o=M();let l="";switch(e){case"twitter":l=`https://twitter.com/intent/tweet?text=${n}&url=${r}&hashtags=${o.join(",")}`;break;case"linkedin":l=`https://www.linkedin.com/sharing/share-offsite/?url=${r}`;break;case"facebook":l=`https://www.facebook.com/sharer/sharer.php?u=${r}&quote=${n}`;break;case"whatsapp":l=`https://wa.me/?text=${s}`;break;case"telegram":l=`https://t.me/share/url?url=${r}&text=${n}`;break;case"email":l=`mailto:?subject=${i}&body=${s}`}window.open(l,"_blank","width=600,height=400"),F({title:"Opening Share Dialog",description:`Sharing your results on ${e.charAt(0).toUpperCase()+e.slice(1)}...`})},E="undefined"!=typeof navigator&&"share"in navigator;return t.jsx(n,{className:`bg-gradient-to-br from-slate-50 to-gray-100 dark:from-slate-900 dark:to-gray-900 border-slate-200 dark:border-slate-700 ${N}`,children:t.jsxs(s,{className:"py-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E&&t.jsxs(r,{onClick:async()=>{if(navigator.share)try{await navigator.share({title:P,text:A(),url:I}),F({title:"Shared Successfully!",description:"Thanks for sharing!"})}catch(e){"AbortError"!==e.name&&console.error("Native share failed:",e)}},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[t.jsx(u,{className:"h-4 w-4 mr-2"}),"Share Results"]}),!E&&t.jsxs(i,{children:[t.jsx(o,{asChild:!0,children:t.jsxs(r,{variant:"outline",className:"flex-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700",children:[t.jsx(u,{className:"h-4 w-4 mr-2"}),"Share Results"]})}),t.jsxs(l,{align:"end",className:"w-48",children:[t.jsxs(c,{onSelect:async()=>{try{await navigator.clipboard.writeText(I),T(!0),F({title:"Link Copied!",description:"Share link has been copied to your clipboard."}),setTimeout(()=>T(!1),3e3)}catch(e){F({title:"Copy Failed",description:"Failed to copy link. Please try again.",variant:"destructive"})}},children:[t.jsx(p,{className:"h-4 w-4 mr-2"}),R?"Link Copied!":"Copy Share Link"]}),t.jsxs(c,{onSelect:async()=>{try{const e=B();await navigator.clipboard.writeText(e),F({title:"Results Copied!",description:"Results have been copied to your clipboard."})}catch(e){F({title:"Copy Failed",description:"Failed to copy results. Please try again.",variant:"destructive"})}},children:[t.jsx(x,{className:"h-4 w-4 mr-2"}),"Copy Results Text"]}),t.jsx(d,{}),t.jsxs(c,{onSelect:()=>O("twitter"),children:[t.jsx(f,{className:"h-4 w-4 mr-2"}),"Share on Twitter"]}),t.jsxs(c,{onSelect:()=>O("facebook"),children:[t.jsx(w,{className:"h-4 w-4 mr-2"}),"Share on Facebook"]}),t.jsxs(c,{onSelect:()=>O("linkedin"),children:[t.jsx(g,{className:"h-4 w-4 mr-2"}),"Share on LinkedIn"]}),t.jsxs(c,{onSelect:()=>O("whatsapp"),children:[t.jsx(y,{className:"h-4 w-4 mr-2"}),"Share on WhatsApp"]}),t.jsxs(c,{onSelect:()=>O("telegram"),children:[t.jsx(y,{className:"h-4 w-4 mr-2"}),"Share on Telegram"]}),t.jsxs(c,{onSelect:()=>O("email"),children:[t.jsx(b,{className:"h-4 w-4 mr-2"}),"Share via Email"]})]})]}),t.jsxs(r,{onClick:async()=>{L(!0);try{const e=`${P}\n\nDate: ${(new Date).toLocaleDateString()}\n\nResults:\n${JSON.stringify(S,null,2)}\n\nInputs:\n${JSON.stringify($,null,2)}\n\n`+(k?`Analysis:\n${JSON.stringify(k,null,2)}\n\n`:"")+`URL: ${I}`,t=new Blob([e],{type:"text/plain"}),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`${j}-results-${Date.now()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),F({title:"Download Complete!",description:"Your results have been downloaded."})}catch(e){console.error("Download error:",e),F({title:"Download Failed",description:"Failed to download results. Please try again.",variant:"destructive"})}finally{L(!1)}},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:C,children:[C?t.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(h,{className:"h-4 w-4 mr-2"}),C?"Generating...":"Download Report"]})]}),t.jsx("div",{className:"mt-4 text-xs text-gray-600 dark:text-gray-400 text-center",children:"Share your calculations with friends or save them for future reference"})]})})}export{j as E};
