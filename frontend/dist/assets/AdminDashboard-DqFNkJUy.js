import{r as s,j as e}from"./ui-DlaF13aT.js";import{l as a,v as t,ad as i,a2 as l,B as r,M as n,e as o,ab as c,f as d,j as m}from"./index-Bz8mWo3A.js";import{B as x}from"./badge-Yxso3t7Q.js";import{d as h}from"./router-CpKuIDSt.js";import{P as j}from"./plus-8wPMdtHD.js";import{E as p}from"./eye-CwmidPN2.js";import{S as u}from"./square-pen-Bw_IsG40.js";import{T as g}from"./trash-2-BKaciHhd.js";import"./vendor-DjPCVcPo.js";import"./charts-DCG9Wh5P.js";
/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=a("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),y=()=>{const a=h(),[y,v]=s.useState([]),[N,b]=s.useState(!1),{toast:w}=t(),{logout:k,callAdminAPI:C}=i();s.useEffect(()=>{D()},[]);const D=async()=>{try{b(!0);const s=await l.blog.list({published:void 0});v(s.posts)}catch(s){console.error("Fetch error:",s),w({title:"Error",description:"Failed to fetch posts",variant:"destructive"})}finally{b(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Blog Admin Dashboard"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",onClick:()=>a("/admin/blogs"),children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Manage Posts"]}),e.jsxs(r,{variant:"outline",onClick:()=>a("/admin/blogs"),children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Auto-Blog"]}),e.jsxs(r,{variant:"outline",onClick:()=>a("/admin/pwa-analytics"),children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"PWA Analytics"]}),e.jsxs(r,{variant:"outline",onClick:()=>a("/admin/logs"),children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Logs"]}),e.jsxs(r,{variant:"outline",onClick:k,children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Logout"]}),e.jsxs(r,{onClick:()=>a("/admin/blog/new"),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"New Post"]})]})]}),N?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsxs("div",{className:"grid gap-4",children:[y.map(s=>e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.title}),e.jsx(x,{variant:s.published?"default":"secondary",children:s.published?"Published":"Draft"})]}),e.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["/",s.slug]}),s.excerpt&&e.jsx("p",{className:"text-gray-700 mb-2",children:s.excerpt}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(s.created_at).toLocaleDateString()," | Updated: ",new Date(s.updated_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.open(`/blog/${s.slug}`,"_blank"),children:e.jsx(p,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>a(`/admin/blog/edit/${s.slug}`),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>(async s=>{if(confirm("Are you sure you want to delete this post?"))try{b(!0),await C(`/admin/blog/${s}`,{method:"DELETE"}),w({title:"Success",description:"Post deleted successfully"}),await D()}catch(e){console.error("Delete error:",e),w({title:"Error",description:"Failed to delete post",variant:"destructive"})}finally{b(!1)}})(s.id),children:e.jsx(g,{className:"w-4 h-4"})})]})]})})},s.id)),0===y.length&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No posts found. Create your first post!"})]})]})})};export{y as default};
