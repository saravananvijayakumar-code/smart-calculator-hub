import{r as e,j as s}from"./ui-DlaF13aT.js";import{B as t,ab as l,a7 as a,f as r,T as n,G as c,a2 as i}from"./index-Bz8mWo3A.js";import{U as d}from"./users-CQVo4wS5.js";import"./vendor-DjPCVcPo.js";import"./charts-DCG9Wh5P.js";import"./router-CpKuIDSt.js";function x(){const[x,m]=e.useState(null),[o,p]=e.useState(!0),h=async()=>{try{p(!0);const e=await i.pwa_install.getStats();m(e)}catch(e){console.error("Error fetching PWA analytics:",e)}finally{p(!1)}};e.useEffect(()=>{h()},[]);if(o)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})});if(!x)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx("p",{children:"Failed to load PWA analytics"}),s.jsx(t,{onClick:h,className:"mt-4",children:"Retry"})]})})});const j=x.last7Days.reduce((e,s)=>e+s.installs,0),b=x.last30Days.reduce((e,s)=>e+s.installs,0);return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(l,{className:"w-10 h-10 text-purple-400"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold text-white",children:"PWA Install Analytics"}),s.jsx("p",{className:"text-purple-300 mt-1",children:"Track progressive web app installations"})]})]}),s.jsxs(t,{onClick:h,variant:"outline",className:"gap-2 bg-purple-500/10 border-purple-500/50 text-white hover:bg-purple-500/20",children:[s.jsx(a,{className:"w-4 h-4"}),"Refresh"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(r,{className:"p-6 bg-gradient-to-br from-purple-500/20 to-blue-500/20 border-purple-500/30",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-purple-300 mb-1",children:"Total Installs"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:x.totalInstalls})]}),s.jsx(d,{className:"w-12 h-12 text-purple-400 opacity-50"})]})}),s.jsx(r,{className:"p-6 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border-blue-500/30",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-300 mb-1",children:"Last 7 Days"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:j})]}),s.jsx(n,{className:"w-12 h-12 text-blue-400 opacity-50"})]})}),s.jsx(r,{className:"p-6 bg-gradient-to-br from-cyan-500/20 to-green-500/20 border-cyan-500/30",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-cyan-300 mb-1",children:"Last 30 Days"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:b})]}),s.jsx(n,{className:"w-12 h-12 text-cyan-400 opacity-50"})]})}),s.jsx(r,{className:"p-6 bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/30",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-300 mb-1",children:"Countries"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:x.byCountry.length})]}),s.jsx(c,{className:"w-12 h-12 text-green-400 opacity-50"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs(r,{className:"p-6 bg-slate-800/50 border-purple-500/30",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Installs by Platform"}),s.jsx("div",{className:"space-y-3",children:x.byPlatform.length>0?x.byPlatform.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-purple-200",children:e.platform}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500",style:{width:e.count/x.totalInstalls*100+"%"}})}),s.jsx("span",{className:"text-white font-semibold w-12 text-right",children:e.count})]})]},t)):s.jsx("p",{className:"text-purple-300 text-center py-4",children:"No platform data available"})})]}),s.jsxs(r,{className:"p-6 bg-slate-800/50 border-purple-500/30",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Installs by Country"}),s.jsx("div",{className:"space-y-3",children:x.byCountry.length>0?x.byCountry.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-purple-200",children:e.country}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500",style:{width:e.count/x.totalInstalls*100+"%"}})}),s.jsx("span",{className:"text-white font-semibold w-12 text-right",children:e.count})]})]},t)):s.jsx("p",{className:"text-purple-300 text-center py-4",children:"No country data available"})})]})]}),s.jsxs(r,{className:"p-6 bg-slate-800/50 border-purple-500/30",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Recent Installs (Last 50)"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-purple-500/30",children:[s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Date & Time"}),s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Platform"}),s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Location"}),s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"User Agent"})]})}),s.jsx("tbody",{children:x.recentInstalls.length>0?x.recentInstalls.map(e=>{return s.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-purple-500/10",children:[s.jsx("td",{className:"py-3 px-4 text-white text-sm",children:(t=e.installed_at,new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}))}),s.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm",children:e.platform||"Unknown"}),s.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm",children:e.city&&e.country?`${e.city}, ${e.country}`:e.country||"Unknown"}),s.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm max-w-md truncate",children:e.user_agent||"Unknown"})]},e.id);var t}):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"py-8 text-center text-purple-300",children:"No install records available"})})})]})})]}),s.jsxs(r,{className:"p-6 bg-slate-800/50 border-purple-500/30 mt-8",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Daily Install Trend (Last 30 Days)"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-purple-500/30",children:[s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Date"}),s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Installs"}),s.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Trend"})]})}),s.jsx("tbody",{children:x.last30Days.length>0?x.last30Days.map((e,t)=>{return s.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-purple-500/10",children:[s.jsx("td",{className:"py-3 px-4 text-white text-sm",children:(l=e.date,new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}),s.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm font-semibold",children:e.installs}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("div",{className:"w-full max-w-xs h-2 bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500",style:{width:`${Math.min(e.installs/Math.max(...x.last30Days.map(e=>e.installs))*100,100)}%`}})})})]},e.date);var l}):s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"py-8 text-center text-purple-300",children:"No trend data available"})})})]})})]})]})})}export{x as default};
