import{r as e,j as s}from"./ui-DlaF13aT.js";import{f as a,g as t,h as l,i,j as r,B as n,m as c,Q as m,o,R as x,T as d,a2 as h}from"./index-Bz8mWo3A.js";import{B as j}from"./badge-Yxso3t7Q.js";import{T as p,a as u,b as g,c as N}from"./tabs-BpRHwVmU.js";import{B as f}from"./brain-vGshZRXr.js";import{T as b}from"./target-CY0nPYCc.js";import{C as y}from"./circle-check-big-DxDlI_ih.js";const w={high:{color:"destructive",icon:o},medium:{color:"default",icon:b},low:{color:"secondary",icon:y}},v={optimization:{label:"Optimization",color:"bg-blue-50 text-blue-700 border-blue-200"},warning:{label:"Warning",color:"bg-red-50 text-red-700 border-red-200"},opportunity:{label:"Opportunity",color:"bg-green-50 text-green-700 border-green-200"},strategy:{label:"Strategy",color:"bg-purple-50 text-purple-700 border-purple-200"},engagement:{label:"Engagement",color:"bg-yellow-50 text-yellow-700 border-yellow-200"},growth:{label:"Growth",color:"bg-green-50 text-green-700 border-green-200"}};function k({recommendation:e}){const{type:n,priority:c,title:m,description:o,actionItems:x,potentialSavings:d,estimatedImpact:h}=e,p=w[c].icon,u=v[n];return s.jsxs(a,{className:"mb-4",children:[s.jsxs(t,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(p,{className:"h-5 w-5 text-muted-foreground"}),s.jsx(l,{className:"text-lg",children:m})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(j,{variant:w[c].color,children:[c," priority"]}),s.jsx(j,{variant:"outline",className:u.color,children:u.label})]})]}),s.jsx(i,{children:o})]}),s.jsx(r,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Action Items:"}),s.jsx("ul",{className:"space-y-1",children:x.map((e,a)=>s.jsxs("li",{className:"flex items-start space-x-2 text-sm text-muted-foreground p-2 bg-muted rounded",children:[s.jsx(y,{className:"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0"}),s.jsx("span",{children:e})]},a))})]}),(d||h)&&s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[d&&s.jsxs("p",{className:"text-sm font-medium text-green-700",children:["ðŸ’° Potential Savings: $",d.toLocaleString()]}),h&&s.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["ðŸ“ˆ ",h]})]})]})})]})}function A({title:e,items:i,icon:n}){return 0===i.length?null:s.jsxs(a,{children:[s.jsx(t,{className:"pb-3",children:s.jsxs(l,{className:"flex items-center space-x-2 text-lg",children:[n,s.jsx("span",{children:e})]})}),s.jsx(r,{children:s.jsx("ul",{className:"space-y-2",children:i.map((e,a)=>s.jsxs("li",{className:"flex items-start space-x-2 text-sm",children:[s.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{children:e})]},a))})})]})}function I({analysisRequest:j,className:w,autoRun:v=!1,title:I="AI Financial Analysis",description:S="Get personalized recommendations and insights based on your calculation results."}){const[R,z]=e.useState(null),[G,P]=e.useState(!1),[C,F]=e.useState(null),T=async()=>{P(!0),F(null);try{const e=await h.ai_analysis.analyze(j);z(e)}catch(e){console.error("AI Analysis error:",e),F("Failed to generate analysis. Please try again.")}finally{P(!1)}};if(e.useEffect(()=>{v&&T()},[v]),!R&&!G)return s.jsxs(a,{className:w,children:[s.jsxs(t,{children:[s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"h-6 w-6 text-primary"}),s.jsx("span",{children:I})]}),s.jsx(i,{children:S})]}),s.jsx(r,{children:s.jsxs(n,{onClick:T,className:"w-full",children:[s.jsx(f,{className:"h-4 w-4 mr-2"}),"Generate AI Analysis"]})})]});if(G)return s.jsx(a,{className:w,children:s.jsx(r,{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(c,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{children:"Analyzing your results..."})]})})});if(C)return s.jsx(a,{className:w,children:s.jsxs(r,{className:"py-6",children:[s.jsxs(m,{variant:"destructive",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx(x,{children:C})]}),s.jsx(n,{onClick:T,variant:"outline",className:"mt-4",children:"Try Again"})]})});if(!R)return null;const $=R.recommendations.filter(e=>"high"===e.priority),B=R.recommendations.filter(e=>"medium"===e.priority),E=R.recommendations.filter(e=>"low"===e.priority);return s.jsxs(a,{className:w,children:[s.jsxs(t,{children:[s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"h-6 w-6 text-primary"}),s.jsx("span",{children:I})]}),s.jsx(i,{className:"text-base",children:R.summary})]}),s.jsxs(r,{children:[s.jsxs(p,{defaultValue:"recommendations",className:"w-full",children:[s.jsxs(u,{className:"grid w-full grid-cols-4",children:[s.jsx(g,{value:"recommendations",children:"Recommendations"}),s.jsx(g,{value:"insights",children:"Insights"}),s.jsx(g,{value:"risks",children:"Risks"}),s.jsx(g,{value:"next-steps",children:"Next Steps"})]}),s.jsx(N,{value:"recommendations",className:"mt-6",children:s.jsxs("div",{className:"space-y-6",children:[$.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center space-x-2",children:[s.jsx(o,{className:"h-5 w-5 text-red-500"}),s.jsx("span",{children:"High Priority"})]}),$.map((e,a)=>s.jsx(k,{recommendation:e},`high-${a}`))]}),B.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center space-x-2",children:[s.jsx(b,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{children:"Medium Priority"})]}),B.map((e,a)=>s.jsx(k,{recommendation:e},`medium-${a}`))]}),E.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center space-x-2",children:[s.jsx(y,{className:"h-5 w-5 text-green-500"}),s.jsx("span",{children:"Low Priority"})]}),E.map((e,a)=>s.jsx(k,{recommendation:e},`low-${a}`))]}),0===R.recommendations.length&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(y,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),s.jsx("p",{children:"Great job! No specific recommendations at this time."})]})]})}),s.jsx(N,{value:"insights",className:"mt-6",children:s.jsx(A,{title:"Key Insights",items:R.keyInsights,icon:s.jsx(d,{className:"h-5 w-5 text-blue-500"})})}),s.jsx(N,{value:"risks",className:"mt-6",children:s.jsx(A,{title:"Risk Factors",items:R.riskFactors,icon:s.jsx(o,{className:"h-5 w-5 text-red-500"})})}),s.jsx(N,{value:"next-steps",className:"mt-6",children:s.jsx(A,{title:"Next Steps",items:R.nextSteps,icon:s.jsx(y,{className:"h-5 w-5 text-green-500"})})})]}),s.jsx("div",{className:"mt-6 pt-4 border-t",children:s.jsxs(n,{onClick:T,variant:"outline",size:"sm",disabled:G,children:[G?s.jsx(c,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(f,{className:"h-4 w-4 mr-2"}),"Refresh Analysis"]})})]})]})}export{I as A};
