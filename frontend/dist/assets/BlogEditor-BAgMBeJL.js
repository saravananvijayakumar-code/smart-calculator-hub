import{r as e,j as t}from"./ui-DlaF13aT.js";import{l as s,B as a,a2 as i,m as r}from"./index-Bz8mWo3A.js";import{T as n}from"./textarea-BSgKvqcc.js";import{T as l,a as o,b as c,c as d}from"./tabs-BpRHwVmU.js";import{M as m}from"./MarkdownRenderer-CelGe7d4.js";import{B as u,I as h,C as p,Q as x,L as g,a as b}from"./quote-D-aRUu8L.js";import{L as j}from"./link-1jMZnk74.js";import{I as f}from"./image-DgWl23az.js";import{T as y}from"./type-89c7tjv-.js";import{E as v}from"./eye-CwmidPN2.js";import{A as N}from"./arrow-left-D0vU1llf.js";import{S as w}from"./save-DPK-U3GZ.js";import{b as k,d as C}from"./router-CpKuIDSt.js";import"./vendor-DjPCVcPo.js";import"./charts-DCG9Wh5P.js";
/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=s("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),M=s("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),z=s("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),E=({value:s,onChange:i,height:r=400,placeholder:N="Start writing..."})=>{const[w,k]=e.useState("write"),C=e.useRef(null),E=e.useCallback((e,t="",a="")=>{const r=C.current;if(!r)return;const n=r.selectionStart,l=r.selectionEnd,o=s.substring(n,l)||a,c=s.substring(0,n)+e+o+t+s.substring(l);i(c),setTimeout(()=>{r.focus();const t=n+e.length+o.length;r.setSelectionRange(t,t)},0)},[s,i]),L=e.useCallback(()=>{const e=prompt("Enter URL:");if(e){const t=prompt("Enter link text:",e);E(`[${t||e}](`,")")}},[E]),q=e.useCallback(()=>{if(prompt("Enter image URL:")){const e=prompt("Enter alt text:","Image");E(`![${e}](`,")")}},[E]),B=e.useCallback(()=>{const e=["compound-interest","mortgage","loan","investment","retirement","bmi","percentage","currency","tip"],t=prompt(`Enter calculator type (${e.join(", ")}):`,"compound-interest");if(t&&e.includes(t)){E(`\n\n[CALCULATOR:${t}]\n\n`,"")}},[E]),T=[{icon:S,action:()=>E("# ","","Heading 1"),title:"Heading 1"},{icon:M,action:()=>E("## ","","Heading 2"),title:"Heading 2"},{icon:z,action:()=>E("### ","","Heading 3"),title:"Heading 3"},{icon:u,action:()=>E("**","**","bold text"),title:"Bold"},{icon:h,action:()=>E("_","_","italic text"),title:"Italic"},{icon:p,action:()=>E("`","`","code"),title:"Inline Code"},{icon:x,action:()=>E("> ","","blockquote"),title:"Quote"},{icon:g,action:()=>E("- ","","list item"),title:"Bullet List"},{icon:b,action:()=>E("1. ","","list item"),title:"Numbered List"},{icon:j,action:L,title:"Link"},{icon:f,action:q,title:"Image"},{icon:y,action:B,title:"Calculator"}];return t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsxs(l,{value:w,onValueChange:e=>k(e),children:[t.jsxs("div",{className:"flex items-center justify-between border-b bg-gray-50 px-3 py-2",children:[t.jsx("div",{className:"flex flex-wrap gap-1",children:T.map((e,s)=>t.jsx(a,{variant:"ghost",size:"sm",onClick:e.action,title:e.title,className:"h-8 w-8 p-0",children:t.jsx(e.icon,{className:"h-4 w-4"})},s))}),t.jsxs(o,{className:"h-8",children:[t.jsx(c,{value:"write",className:"text-xs",children:"Write"}),t.jsxs(c,{value:"preview",className:"text-xs",children:[t.jsx(v,{className:"h-3 w-3 mr-1"}),"Preview"]})]})]}),t.jsx(d,{value:"write",className:"m-0",children:t.jsx(n,{ref:C,value:s,onChange:e=>i(e.target.value),placeholder:N,className:"border-0 rounded-none resize-none focus-visible:ring-0",style:{height:r}})}),t.jsx(d,{value:"preview",className:"m-0",children:t.jsx("div",{className:"p-4 prose prose-sm max-w-none overflow-auto",style:{height:r},children:s?t.jsx(m,{content:s}):t.jsx("p",{className:"text-gray-500 italic",children:"Nothing to preview yet..."})})})]})})};function L(){const{id:s}=k(),a=C(),n="new"===s,[l,o]=e.useState(""),[c,d]=e.useState(""),[m,u]=e.useState(""),[h,p]=e.useState(""),[x,g]=e.useState(""),[b,j]=e.useState(!1),[f,y]=e.useState(!1),[v,S]=e.useState(!1),[M,z]=e.useState("");e.useEffect(()=>{!n&&s&&L()},[s]);const L=async()=>{try{y(!0);const e=await i.blog.get({slug:s});o(e.title),d(e.slug),u(e.content),p(e.excerpt||""),g(e.author||""),j(e.published)}catch(e){z("Failed to load blog post"),console.error(e)}finally{y(!1)}};return f?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(r,{className:"w-8 h-8 animate-spin text-indigo-600"})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("button",{onClick:()=>a("/admin/blog"),className:"inline-flex items-center text-indigo-600 hover:text-indigo-700",children:[t.jsx(N,{className:"w-4 h-4 mr-2"}),"Back to Blog Management"]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:n?"New Blog Post":"Edit Blog Post"}),M&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:M}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),t.jsx("input",{type:"text",value:l,onChange:e=>{return t=e.target.value,o(t),void(n&&!c&&d(t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")));var t},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter post title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),t.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"post-url-slug"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Excerpt"}),t.jsx("textarea",{value:h,onChange:e=>p(e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Brief description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),t.jsx(E,{value:m,onChange:u,height:500,placeholder:"Write your post content here..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),t.jsx("input",{type:"text",value:x,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Author name"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"published",checked:b,onChange:e=>j(e.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:"published",className:"ml-2 text-sm text-gray-700",children:"Published"})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsxs("button",{onClick:async()=>{if(l&&c&&m)try{S(!0),z(""),n?await i.blog.create({title:l,slug:c,content:m,excerpt:h||void 0,author:x||void 0,published:b}):await i.blog.update({slug:s,title:l,content:m,excerpt:h||void 0,author:x||void 0,published:b}),a("/admin/blog")}catch(e){z(e.message||"Failed to save post"),console.error(e)}finally{S(!1)}else z("Title, slug, and content are required")},disabled:v,className:"inline-flex items-center px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[v?t.jsx(r,{className:"w-4 h-4 mr-2 animate-spin"}):t.jsx(w,{className:"w-4 h-4 mr-2"}),v?"Saving...":"Save Post"]})})]})]})]})})}export{L as default};
