import{j as e}from"./ui-vendor-CXejv-Vd.js";import{r as t}from"./react-vendor-CHV_IW2N.js";import{u as a,a as n,e as s,B as r,k as i,l as o,m as l,n as c,v as d}from"./index-Cr6N7EBb.js";import{aj as h,ax as m,ak as u,aq as p,ar as x,ay as w,as as g,z as f,o as y,F as b}from"./utils-vendor-D0ROWCy7.js";function $({calculatorType:$,inputs:j,results:v,analysis:S,title:k,className:N=""}){const[C,R]=t.useState(!1),[L,T]=t.useState(!1),{toast:F}=a(),I="undefined"!=typeof window?window.location.href:"",U=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),P=k||U($),D=()=>{if($.includes("mortgage"))return v.monthlyPayment?`$${v.monthlyPayment}/month`:"";if($.includes("loan"))return v.monthlyPayment?`$${v.monthlyPayment}/month`:"";if($.includes("investment")||$.includes("retirement"))return v.finalAmount?`$${v.finalAmount.toLocaleString()} projected`:"";if("bmi"===$)return v.bmi?`BMI: ${v.bmi}`:"";if("income-tax-australia"===$){const e=v.effectiveTaxRate?`${v.effectiveTaxRate.toFixed(1)}%`:"",t=v.netIncome?`$${Math.round(v.netIncome).toLocaleString()} net`:"";return e&&t?`${e} effective rate, ${t}`:""}return $.includes("tax")?v.totalTax?`$${Math.round(v.totalTax).toLocaleString()} tax`:"":$.includes("superannuation")||$.includes("super")?v.finalBalance?`$${Math.round(v.finalBalance).toLocaleString()} at retirement`:"":$.includes("cgt")&&v.cgtLiability?`$${Math.round(v.cgtLiability).toLocaleString()} CGT`:""},A=()=>{const e=["SmartCalculator","FinancialPlanning"];return $.includes("tax")?[...e,"Tax","TaxPlanning"]:$.includes("mortgage")||$.includes("loan")?[...e,"Mortgage","HomeLoan","Finance"]:$.includes("investment")||$.includes("retirement")?[...e,"Investment","Retirement","WealthBuilding"]:$.includes("health")||$.includes("bmi")||$.includes("bmr")?["Health","Fitness","Wellness","HealthCalculator"]:$.includes("insurance")?[...e,"Insurance","Protection"]:e},B=()=>{const e=U($),t=D();return`I just calculated my ${e.toLowerCase()}${t?`: ${t}`:""}. Check out this calculator!`},M=()=>{const e=U($),t=D(),a=A().map(e=>`#${e}`).join(" ");return`ðŸ“Š ${e}\n\n${t?`Results: ${t}\n\n`:""}Try it yourself: ${I}\n\n${a}`},O=e=>{const t=B(),a=M(),n=encodeURIComponent(t),s=encodeURIComponent(a),r=encodeURIComponent(I),i=encodeURIComponent(P),o=A();let l="";switch(e){case"twitter":l=`https://twitter.com/intent/tweet?text=${n}&url=${r}&hashtags=${o.join(",")}`;break;case"linkedin":l=`https://www.linkedin.com/sharing/share-offsite/?url=${r}`;break;case"facebook":l=`https://www.facebook.com/sharer/sharer.php?u=${r}&quote=${n}`;break;case"whatsapp":l=`https://wa.me/?text=${s}`;break;case"telegram":l=`https://t.me/share/url?url=${r}&text=${n}`;break;case"email":l=`mailto:?subject=${i}&body=${s}`}window.open(l,"_blank","width=600,height=400"),F({title:"Opening Share Dialog",description:`Sharing your results on ${e.charAt(0).toUpperCase()+e.slice(1)}...`})},E="undefined"!=typeof navigator&&"share"in navigator;return e.jsx(n,{className:`bg-gradient-to-br from-slate-50 to-gray-100 dark:from-slate-900 dark:to-gray-900 border-slate-200 dark:border-slate-700 ${N}`,children:e.jsxs(s,{className:"py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E&&e.jsxs(r,{onClick:async()=>{if(navigator.share)try{await navigator.share({title:P,text:B(),url:I}),F({title:"Shared Successfully!",description:"Thanks for sharing!"})}catch(e){"AbortError"!==e.name&&console.error("Native share failed:",e)}},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Share Results"]}),!E&&e.jsxs(i,{children:[e.jsx(o,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"flex-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Share Results"]})}),e.jsxs(l,{align:"end",className:"w-48",children:[e.jsxs(c,{onSelect:async()=>{try{await navigator.clipboard.writeText(I),T(!0),F({title:"Link Copied!",description:"Share link has been copied to your clipboard."}),setTimeout(()=>T(!1),3e3)}catch(e){F({title:"Copy Failed",description:"Failed to copy link. Please try again.",variant:"destructive"})}},children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),L?"Link Copied!":"Copy Share Link"]}),e.jsxs(c,{onSelect:async()=>{try{const e=M();await navigator.clipboard.writeText(e),F({title:"Results Copied!",description:"Results have been copied to your clipboard."})}catch(e){F({title:"Copy Failed",description:"Failed to copy results. Please try again.",variant:"destructive"})}},children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Copy Results Text"]}),e.jsx(d,{}),e.jsxs(c,{onSelect:()=>O("twitter"),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Share on Twitter"]}),e.jsxs(c,{onSelect:()=>O("facebook"),children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Share on Facebook"]}),e.jsxs(c,{onSelect:()=>O("linkedin"),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Share on LinkedIn"]}),e.jsxs(c,{onSelect:()=>O("whatsapp"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Share on WhatsApp"]}),e.jsxs(c,{onSelect:()=>O("telegram"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Share on Telegram"]}),e.jsxs(c,{onSelect:()=>O("email"),children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Share via Email"]})]})]}),e.jsxs(r,{onClick:async()=>{R(!0);try{const e=`${P}\n\nDate: ${(new Date).toLocaleDateString()}\n\nResults:\n${JSON.stringify(v,null,2)}\n\nInputs:\n${JSON.stringify(j,null,2)}\n\n`+(S?`Analysis:\n${JSON.stringify(S,null,2)}\n\n`:"")+`URL: ${I}`,t=new Blob([e],{type:"text/plain"}),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`${$}-results-${Date.now()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),F({title:"Download Complete!",description:"Your results have been downloaded."})}catch(e){console.error("Download error:",e),F({title:"Download Failed",description:"Failed to download results. Please try again.",variant:"destructive"})}finally{R(!1)}},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:C,children:[C?e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(b,{className:"h-4 w-4 mr-2"}),C?"Generating...":"Download Report"]})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-600 dark:text-gray-400 text-center",children:"Share your calculations with friends or save them for future reference"})]})})}export{$ as E};
