import{j as e}from"./ui-vendor-CXejv-Vd.js";import{r as s}from"./react-vendor-CHV_IW2N.js";import{B as r,a,b as l,c as t,e as c,L as i,I as n,d}from"./index-Cr6N7EBb.js";import{B as o}from"./badge-BR8KeZ6e.js";import{S as x,a as m,b as h,c as j,d as g}from"./select-y5A4yAFV.js";import{R as u,P as v,O as N,I as p,i as b,a_ as y,bx as f,l as w,ao as L,by as S}from"./utils-vendor-D0ROWCy7.js";import"./charts-vendor-CfJeLvg-.js";import"./i18n-vendor-p0y8CAKE.js";function E(){const[E,C]=s.useState([]),[I,k]=s.useState(null),[T,A]=s.useState(!0),[R,D]=s.useState("all"),[q,F]=s.useState(""),[O,P]=s.useState(new Set),[B,M]=s.useState(!1),U=async()=>{C([])},W=async()=>{k({totalLogs:0,criticalErrors:0,recentErrors:0,byLevel:{error:0,warn:0,info:0,debug:0,critical:0}})},z=async()=>{A(!0),await Promise.all([U(),W()]),A(!1)};s.useEffect(()=>{z()},[R,q]);const J=s=>{switch(s){case"critical":return e.jsx(S,{className:"w-4 h-4"});case"error":return e.jsx(L,{className:"w-4 h-4"});case"warn":return e.jsx(w,{className:"w-4 h-4"});case"info":return e.jsx(p,{className:"w-4 h-4"});case"debug":return e.jsx(f,{className:"w-4 h-4"})}},V=e=>{switch(e){case"critical":return"bg-red-900 text-white border-red-950";case"error":return"bg-red-100 text-red-800 border-red-200";case"warn":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-200";case"debug":return"bg-gray-100 text-gray-800 border-gray-200"}};return T?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Logs"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and analyze application errors"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{onClick:async()=>{console.log("Logs service not implemented")},variant:"outline",children:"Test Error"}),e.jsxs(r,{onClick:async()=>{M(!0),await z(),M(!1)},variant:"outline",disabled:B,children:[e.jsx(u,{className:"w-4 h-4 mr-2 "+(B?"animate-spin":"")}),"Refresh"]}),e.jsxs(r,{onClick:async()=>{confirm("Are you sure you want to clear all logs?")&&console.log("Logs service not implemented")},variant:"destructive",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Clear Logs"]})]})]}),I&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(a,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Total Logs"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:I.totalLogs.toLocaleString()})})]}),e.jsxs(a,{className:"border-red-200 bg-red-50",children:[e.jsx(l,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium text-red-900",children:"Critical"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-red-900",children:I.criticalErrors.toLocaleString()})})]}),e.jsxs(a,{className:"border-orange-200 bg-orange-50",children:[e.jsx(l,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium text-orange-900",children:"Recent (24h)"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:I.recentErrors.toLocaleString()})})]}),e.jsxs(a,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Errors"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:I.byLevel.error.toLocaleString()})})]}),e.jsxs(a,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Warnings"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:I.byLevel.warn.toLocaleString()})})]})]}),e.jsxs(a,{children:[e.jsx(l,{children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Filters"]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Log Level"}),e.jsxs(x,{value:R,onValueChange:D,children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All levels"})}),e.jsxs(j,{children:[e.jsx(g,{value:"all",children:"All levels"}),e.jsx(g,{value:"critical",children:"Critical"}),e.jsx(g,{value:"error",children:"Error"}),e.jsx(g,{value:"warn",children:"Warning"}),e.jsx(g,{value:"info",children:"Info"}),e.jsx(g,{value:"debug",children:"Debug"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Service Name"}),e.jsx(n,{placeholder:"Filter by service...",value:q,onChange:e=>F(e.target.value)})]})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs(t,{children:["Error Logs (",E.length,")"]}),e.jsx(d,{children:"Recent errors and warnings from the application"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-2",children:0===E.length?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(p,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No logs found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a test error"})]}):E.map(s=>{const r=O.has(s.id);return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>(e=>{const s=new Set(O);s.has(e)?s.delete(e):s.add(e),P(s)})(s.id),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r?e.jsx(b,{className:"w-5 h-5 text-gray-400 mt-1"}):e.jsx(y,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(o,{className:V(s.level),children:[J(s.level),e.jsx("span",{className:"ml-1",children:s.level.toUpperCase()})]}),s.serviceName&&e.jsx(o,{variant:"outline",children:s.serviceName}),s.errorType&&e.jsx(o,{variant:"secondary",children:s.errorType}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:new Date(s.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.message}),s.endpoint&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Endpoint: ",s.endpoint]})]})]})})}),r&&e.jsxs("div",{className:"border-t bg-gray-50 p-4 space-y-3",children:[s.stackTrace&&e.jsxs("div",{children:[e.jsx(i,{className:"text-xs font-semibold text-gray-700",children:"Stack Trace"}),e.jsx("pre",{className:"mt-1 text-xs bg-gray-900 text-gray-100 p-3 rounded overflow-x-auto",children:s.stackTrace})]}),s.metadata&&Object.keys(s.metadata).length>0&&e.jsxs("div",{children:[e.jsx(i,{className:"text-xs font-semibold text-gray-700",children:"Metadata"}),e.jsx("pre",{className:"mt-1 text-xs bg-gray-900 text-gray-100 p-3 rounded overflow-x-auto",children:JSON.stringify(s.metadata,null,2)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[s.requestId&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Request ID:"}),e.jsx("div",{className:"text-gray-600",children:s.requestId})]}),s.userId&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"User ID:"}),e.jsx("div",{className:"text-gray-600",children:s.userId})]}),s.ipAddress&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"IP Address:"}),e.jsx("div",{className:"text-gray-600",children:s.ipAddress})]}),s.environment&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Environment:"}),e.jsx("div",{className:"text-gray-600",children:s.environment})]})]})]})]},s.id)})})})]})]})}export{E as LogsViewer};
