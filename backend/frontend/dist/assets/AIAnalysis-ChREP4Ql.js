import{j as e}from"./ui-vendor-CXejv-Vd.js";import{r as s}from"./react-vendor-CHV_IW2N.js";import{a,b as t,c as l,d as r,e as i,B as n,A as c,p as m,t as o}from"./index-Cr6N7EBb.js";import{B as x}from"./badge-BR8KeZ6e.js";import{T as d,a as h,b as j,c as p}from"./tabs-kE7gD3tv.js";import{v as u,o as g,l as N,t as f,w as y,T as b}from"./utils-vendor-D0ROWCy7.js";const v={high:{color:"destructive",icon:N},medium:{color:"default",icon:f},low:{color:"secondary",icon:y}},w={optimization:{label:"Optimization",color:"bg-blue-50 text-blue-700 border-blue-200"},warning:{label:"Warning",color:"bg-red-50 text-red-700 border-red-200"},opportunity:{label:"Opportunity",color:"bg-green-50 text-green-700 border-green-200"},strategy:{label:"Strategy",color:"bg-purple-50 text-purple-700 border-purple-200"},engagement:{label:"Engagement",color:"bg-yellow-50 text-yellow-700 border-yellow-200"},growth:{label:"Growth",color:"bg-green-50 text-green-700 border-green-200"}};function A({recommendation:s}){const{type:n,priority:c,title:m,description:o,actionItems:d,potentialSavings:h,estimatedImpact:j}=s,p=v[c].icon,u=w[n];return e.jsxs(a,{className:"mb-4",children:[e.jsxs(t,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(l,{className:"text-lg",children:m})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{variant:v[c].color,children:[c," priority"]}),e.jsx(x,{variant:"outline",className:u.color,children:u.label})]})]}),e.jsx(r,{children:o})]}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Action Items:"}),e.jsx("ul",{className:"space-y-1",children:d.map((s,a)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm text-muted-foreground p-2 bg-muted rounded",children:[e.jsx(y,{className:"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0"}),e.jsx("span",{children:s})]},a))})]}),(h||j)&&e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[h&&e.jsxs("p",{className:"text-sm font-medium text-green-700",children:["ðŸ’° Potential Savings: $",h.toLocaleString()]}),j&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["ðŸ“ˆ ",j]})]})]})})]})}function k({title:s,items:r,icon:n}){return 0===r.length?null:e.jsxs(a,{children:[e.jsx(t,{className:"pb-3",children:e.jsxs(l,{className:"flex items-center space-x-2 text-lg",children:[n,e.jsx("span",{children:s})]})}),e.jsx(i,{children:e.jsx("ul",{className:"space-y-2",children:r.map((s,a)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm",children:[e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:s})]},a))})})]})}function S({analysisRequest:x,className:v,autoRun:w=!1,title:S="AI Financial Analysis",description:I="Get personalized recommendations and insights based on your calculation results."}){const[z,R]=s.useState(null),[P,F]=s.useState(!1),[G,T]=s.useState(null),$=async()=>{F(!0),T(null);try{const e=await o.ai_analysis.analyze(x);R(e)}catch(e){console.error("AI Analysis error:",e),T("Failed to generate analysis. Please try again.")}finally{F(!1)}};if(s.useEffect(()=>{w&&$()},[w]),!z&&!P)return e.jsxs(a,{className:v,children:[e.jsxs(t,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-6 w-6 text-primary"}),e.jsx("span",{children:S})]}),e.jsx(r,{children:I})]}),e.jsx(i,{children:e.jsxs(n,{onClick:$,className:"w-full",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Generate AI Analysis"]})})]});if(P)return e.jsx(a,{className:v,children:e.jsx(i,{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[e.jsx(g,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Analyzing your results..."})]})})});if(G)return e.jsx(a,{className:v,children:e.jsxs(i,{className:"py-6",children:[e.jsxs(c,{variant:"destructive",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx(m,{children:G})]}),e.jsx(n,{onClick:$,variant:"outline",className:"mt-4",children:"Try Again"})]})});if(!z)return null;const C=z.recommendations.filter(e=>"high"===e.priority),B=z.recommendations.filter(e=>"medium"===e.priority),E=z.recommendations.filter(e=>"low"===e.priority);return e.jsxs(a,{className:v,children:[e.jsxs(t,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-6 w-6 text-primary"}),e.jsx("span",{children:S})]}),e.jsx(r,{className:"text-base",children:z.summary})]}),e.jsxs(i,{children:[e.jsxs(d,{defaultValue:"recommendations",className:"w-full",children:[e.jsxs(h,{className:"grid w-full grid-cols-4",children:[e.jsx(j,{value:"recommendations",children:"Recommendations"}),e.jsx(j,{value:"insights",children:"Insights"}),e.jsx(j,{value:"risks",children:"Risks"}),e.jsx(j,{value:"next-steps",children:"Next Steps"})]}),e.jsx(p,{value:"recommendations",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[C.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center space-x-2",children:[e.jsx(N,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:"High Priority"})]}),C.map((s,a)=>e.jsx(A,{recommendation:s},`high-${a}`))]}),B.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center space-x-2",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"Medium Priority"})]}),B.map((s,a)=>e.jsx(A,{recommendation:s},`medium-${a}`))]}),E.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Low Priority"})]}),E.map((s,a)=>e.jsx(A,{recommendation:s},`low-${a}`))]}),0===z.recommendations.length&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"Great job! No specific recommendations at this time."})]})]})}),e.jsx(p,{value:"insights",className:"mt-6",children:e.jsx(k,{title:"Key Insights",items:z.keyInsights,icon:e.jsx(b,{className:"h-5 w-5 text-blue-500"})})}),e.jsx(p,{value:"risks",className:"mt-6",children:e.jsx(k,{title:"Risk Factors",items:z.riskFactors,icon:e.jsx(N,{className:"h-5 w-5 text-red-500"})})}),e.jsx(p,{value:"next-steps",className:"mt-6",children:e.jsx(k,{title:"Next Steps",items:z.nextSteps,icon:e.jsx(y,{className:"h-5 w-5 text-green-500"})})})]}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs(n,{onClick:$,variant:"outline",size:"sm",disabled:P,children:[P?e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(u,{className:"h-4 w-4 mr-2"}),"Refresh Analysis"]})})]})]})}export{S as A};
