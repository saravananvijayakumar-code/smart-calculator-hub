import{j as e}from"./ui-vendor-CXejv-Vd.js";import{r as s}from"./react-vendor-CHV_IW2N.js";import{B as t,a as l,t as a}from"./index-Cr6N7EBb.js";import{a as r,R as n,U as c,T as i,G as d}from"./utils-vendor-D0ROWCy7.js";import"./charts-vendor-CfJeLvg-.js";import"./i18n-vendor-p0y8CAKE.js";function x(){const[x,m]=s.useState(null),[o,p]=s.useState(!0),h=async()=>{try{p(!0);const e=await a.pwa_install.getStats();m(e)}catch(e){console.error("Error fetching PWA analytics:",e)}finally{p(!1)}};s.useEffect(()=>{h()},[]);if(o)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})});if(!x)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("p",{children:"Failed to load PWA analytics"}),e.jsx(t,{onClick:h,className:"mt-4",children:"Retry"})]})})});const j=x.last7Days.reduce((e,s)=>e+s.installs,0),b=x.last30Days.reduce((e,s)=>e+s.installs,0);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{className:"w-10 h-10 text-purple-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"PWA Install Analytics"}),e.jsx("p",{className:"text-purple-300 mt-1",children:"Track progressive web app installations"})]})]}),e.jsxs(t,{onClick:h,variant:"outline",className:"gap-2 bg-purple-500/10 border-purple-500/50 text-white hover:bg-purple-500/20",children:[e.jsx(n,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(l,{className:"p-6 bg-gradient-to-br from-purple-500/20 to-blue-500/20 border-purple-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-300 mb-1",children:"Total Installs"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x.totalInstalls})]}),e.jsx(c,{className:"w-12 h-12 text-purple-400 opacity-50"})]})}),e.jsx(l,{className:"p-6 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border-blue-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-300 mb-1",children:"Last 7 Days"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:j})]}),e.jsx(i,{className:"w-12 h-12 text-blue-400 opacity-50"})]})}),e.jsx(l,{className:"p-6 bg-gradient-to-br from-cyan-500/20 to-green-500/20 border-cyan-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cyan-300 mb-1",children:"Last 30 Days"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:b})]}),e.jsx(i,{className:"w-12 h-12 text-cyan-400 opacity-50"})]})}),e.jsx(l,{className:"p-6 bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-300 mb-1",children:"Countries"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x.byCountry.length})]}),e.jsx(d,{className:"w-12 h-12 text-green-400 opacity-50"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(l,{className:"p-6 bg-slate-800/50 border-purple-500/30",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Installs by Platform"}),e.jsx("div",{className:"space-y-3",children:x.byPlatform.length>0?x.byPlatform.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-200",children:s.platform}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500",style:{width:s.count/x.totalInstalls*100+"%"}})}),e.jsx("span",{className:"text-white font-semibold w-12 text-right",children:s.count})]})]},t)):e.jsx("p",{className:"text-purple-300 text-center py-4",children:"No platform data available"})})]}),e.jsxs(l,{className:"p-6 bg-slate-800/50 border-purple-500/30",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Installs by Country"}),e.jsx("div",{className:"space-y-3",children:x.byCountry.length>0?x.byCountry.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-200",children:s.country}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500",style:{width:s.count/x.totalInstalls*100+"%"}})}),e.jsx("span",{className:"text-white font-semibold w-12 text-right",children:s.count})]})]},t)):e.jsx("p",{className:"text-purple-300 text-center py-4",children:"No country data available"})})]})]}),e.jsxs(l,{className:"p-6 bg-slate-800/50 border-purple-500/30",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Recent Installs (Last 50)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-purple-500/30",children:[e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Date & Time"}),e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Platform"}),e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Location"}),e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"User Agent"})]})}),e.jsx("tbody",{children:x.recentInstalls.length>0?x.recentInstalls.map(s=>{return e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-purple-500/10",children:[e.jsx("td",{className:"py-3 px-4 text-white text-sm",children:(t=s.installed_at,new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}))}),e.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm",children:s.platform||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm",children:s.city&&s.country?`${s.city}, ${s.country}`:s.country||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm max-w-md truncate",children:s.user_agent||"Unknown"})]},s.id);var t}):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-8 text-center text-purple-300",children:"No install records available"})})})]})})]}),e.jsxs(l,{className:"p-6 bg-slate-800/50 border-purple-500/30 mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Daily Install Trend (Last 30 Days)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-purple-500/30",children:[e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Installs"}),e.jsx("th",{className:"text-left text-purple-300 pb-3 px-4",children:"Trend"})]})}),e.jsx("tbody",{children:x.last30Days.length>0?x.last30Days.map((s,t)=>{return e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-purple-500/10",children:[e.jsx("td",{className:"py-3 px-4 text-white text-sm",children:(l=s.date,new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}),e.jsx("td",{className:"py-3 px-4 text-purple-200 text-sm font-semibold",children:s.installs}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"w-full max-w-xs h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500",style:{width:`${Math.min(s.installs/Math.max(...x.last30Days.map(e=>e.installs))*100,100)}%`}})})})]},s.date);var l}):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"py-8 text-center text-purple-300",children:"No trend data available"})})})]})})]})]})})}export{x as default};
