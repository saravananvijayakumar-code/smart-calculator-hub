import{j as s}from"./ui-vendor-CXejv-Vd.js";import{l as e,r as a}from"./react-vendor-CHV_IW2N.js";import{u as t,y as i,t as l,B as r,a as n,e as c}from"./index-Cr6N7EBb.js";import{B as o}from"./badge-BR8KeZ6e.js";import{F as d,B as m,a as x,bl as h,aJ as j,aO as u,V as p,P as g}from"./utils-vendor-D0ROWCy7.js";import"./charts-vendor-CfJeLvg-.js";import"./i18n-vendor-p0y8CAKE.js";const v=()=>{const v=e(),[f,N]=a.useState([]),[b,y]=a.useState(!1),{toast:w}=t(),{logout:C,callAdminAPI:k}=i();a.useEffect(()=>{D()},[]);const D=async()=>{try{y(!0);const s=await l.blog.list({published:void 0});N(s.posts)}catch(s){console.error("Fetch error:",s),w({title:"Error",description:"Failed to fetch posts",variant:"destructive"})}finally{y(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Blog Admin Dashboard"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(r,{variant:"outline",onClick:()=>v("/admin/blogs"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Manage Posts"]}),s.jsxs(r,{variant:"outline",onClick:()=>v("/admin/blogs"),children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"Auto-Blog"]}),s.jsxs(r,{variant:"outline",onClick:()=>v("/admin/pwa-analytics"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"PWA Analytics"]}),s.jsxs(r,{variant:"outline",onClick:()=>v("/admin/logs"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Logs"]}),s.jsxs(r,{variant:"outline",onClick:C,children:[s.jsx(h,{className:"w-4 h-4 mr-2"}),"Logout"]}),s.jsxs(r,{onClick:()=>v("/admin/blog/new"),children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"New Post"]})]})]}),b?s.jsx("div",{className:"text-center py-8",children:"Loading..."}):s.jsxs("div",{className:"grid gap-4",children:[f.map(e=>s.jsx(n,{children:s.jsx(c,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.title}),s.jsx(o,{variant:e.published?"default":"secondary",children:e.published?"Published":"Draft"})]}),s.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["/",e.slug]}),e.excerpt&&s.jsx("p",{className:"text-gray-700 mb-2",children:e.excerpt}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(e.created_at).toLocaleDateString()," | Updated: ",new Date(e.updated_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.open(`/blog/${e.slug}`,"_blank"),children:s.jsx(u,{className:"w-4 h-4"})}),s.jsx(r,{variant:"outline",size:"sm",onClick:()=>v(`/admin/blog/edit/${e.slug}`),children:s.jsx(p,{className:"w-4 h-4"})}),s.jsx(r,{variant:"destructive",size:"sm",onClick:()=>(async s=>{if(confirm("Are you sure you want to delete this post?"))try{y(!0),await k(`/admin/blog/${s}`,{method:"DELETE"}),w({title:"Success",description:"Post deleted successfully"}),await D()}catch(e){console.error("Delete error:",e),w({title:"Error",description:"Failed to delete post",variant:"destructive"})}finally{y(!1)}})(e.id),children:s.jsx(g,{className:"w-4 h-4"})})]})]})})},e.id)),0===f.length&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No posts found. Create your first post!"})]})]})})};export{v as default};
