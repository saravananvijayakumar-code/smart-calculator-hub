import{c as o,p as e,a as t}from"./middleware-0PrtZ3-9.js";const r=o()(e((o,e)=>({history:[],selectedForComparison:[],addCalculation:e=>{const t=`calc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,id:t,timestamp:Date.now()};return o(o=>({history:[r,...o.history]})),t},deleteCalculation:e=>{o(o=>({history:o.history.filter(o=>o.id!==e),selectedForComparison:o.selectedForComparison.filter(o=>o!==e)}))},deleteMultiple:e=>{o(o=>({history:o.history.filter(o=>!e.includes(o.id)),selectedForComparison:o.selectedForComparison.filter(o=>!e.includes(o))}))},clearHistory:()=>{o({history:[],selectedForComparison:[]})},updateNotes:(e,t)=>{o(o=>({history:o.history.map(o=>o.id===e?{...o,notes:t}:o)}))},updateTags:(e,t)=>{o(o=>({history:o.history.map(o=>o.id===e?{...o,tags:t}:o)}))},toggleFavorite:e=>{o(o=>({history:o.history.map(o=>o.id===e?{...o,favorite:!o.favorite}:o)}))},toggleComparisonSelection:e=>{o(o=>o.selectedForComparison.includes(e)?{selectedForComparison:o.selectedForComparison.filter(o=>o!==e)}:o.selectedForComparison.length>=5?o:{selectedForComparison:[...o.selectedForComparison,e]})},clearComparisonSelection:()=>{o({selectedForComparison:[]})},getCalculationById:o=>e().history.find(e=>e.id===o),getCalculationsByType:o=>e().history.filter(e=>e.calculatorType===o),exportHistory:()=>{const{history:o}=e();return JSON.stringify({version:1,exportDate:(new Date).toISOString(),history:o},null,2)}}),{name:"calculator-history-storage",storage:t(()=>localStorage),partialize:o=>({history:o.history})}));export{r as u};
