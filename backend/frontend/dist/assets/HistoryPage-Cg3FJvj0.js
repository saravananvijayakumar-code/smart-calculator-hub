import{f as e,t,j as r,a as s,e as l,P as n,b as o,d as a,i,v as c}from"./ui-vendor-CXejv-Vd.js";import{r as d}from"./react-vendor-CHV_IW2N.js";import{u}from"./calculatorStore-C_XmBkgk.js";import{f as h,D as m,g as p,h as x,i as f,j as g,a as v,B as j,u as b,I as w,k as y,l as N,m as S,n as C,o as T}from"./index-Cr6N7EBb.js";import{B as E}from"./badge-BR8KeZ6e.js";import{C as A}from"./checkbox-D7X0Wt7z.js";import{S as R,a as D,b as L,c as P,d as _}from"./select-y5A4yAFV.js";import{T as k}from"./textarea-BYPke34D.js";import{S as z}from"./separator-CXSiGO8F.js";import{T as O,X as H,K as M,N as I,k as W,h as F,O as U,y as Y,P as X,D as B,Q as $,V,Y as q}from"./utils-vendor-D0ROWCy7.js";import"./middleware-0PrtZ3-9.js";import"./charts-vendor-CfJeLvg-.js";import"./i18n-vendor-p0y8CAKE.js";var Z="ScrollArea",[G]=s(Z),[K,Q]=G(Z),J=d.forwardRef((s,n)=>{const{__scopeScrollArea:o,type:a="hover",dir:i,scrollHideDelay:c=600,...u}=s,[h,m]=d.useState(null),[p,x]=d.useState(null),[f,g]=d.useState(null),[v,j]=d.useState(null),[b,w]=d.useState(null),[y,N]=d.useState(0),[S,C]=d.useState(0),[T,E]=d.useState(!1),[A,R]=d.useState(!1),D=e(n,e=>m(e)),L=t(i);return r.jsx(K,{scope:o,type:a,dir:L,scrollHideDelay:c,scrollArea:h,viewport:p,onViewportChange:x,content:f,onContentChange:g,scrollbarX:v,onScrollbarXChange:j,scrollbarXEnabled:T,onScrollbarXEnabledChange:E,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:A,onScrollbarYEnabledChange:R,onCornerWidthChange:N,onCornerHeightChange:C,children:r.jsx(l.div,{dir:L,...u,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":S+"px",...s.style}})})});J.displayName=Z;var ee="ScrollAreaViewport",te=d.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:o,nonce:a,...i}=t,c=Q(ee,n),u=d.useRef(null),h=e(s,u,c.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(l.div,{"data-radix-scroll-area-viewport":"",...i,ref:h,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:r.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});te.displayName=ee;var re="ScrollAreaScrollbar",se=d.forwardRef((e,t)=>{const{forceMount:s,...l}=e,n=Q(re,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=n,i="horizontal"===e.orientation;return d.useEffect(()=>(i?o(!0):a(!0),()=>{i?o(!1):a(!1)}),[i,o,a]),"hover"===n.type?r.jsx(le,{...l,ref:t,forceMount:s}):"scroll"===n.type?r.jsx(ne,{...l,ref:t,forceMount:s}):"auto"===n.type?r.jsx(oe,{...l,ref:t,forceMount:s}):"always"===n.type?r.jsx(ae,{...l,ref:t}):null});se.displayName=re;var le=d.forwardRef((e,t)=>{const{forceMount:s,...l}=e,o=Q(re,e.__scopeScrollArea),[a,i]=d.useState(!1);return d.useEffect(()=>{const e=o.scrollArea;let t=0;if(e){const r=()=>{window.clearTimeout(t),i(!0)},s=()=>{t=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",s)}}},[o.scrollArea,o.scrollHideDelay]),r.jsx(n,{present:s||a,children:r.jsx(oe,{"data-state":a?"visible":"hidden",...l,ref:t})})}),ne=d.forwardRef((e,t)=>{const{forceMount:s,...l}=e,a=Q(re,e.__scopeScrollArea),i="horizontal"===e.orientation,c=Te(()=>h("SCROLL_END"),100),[u,h]=(m="hidden",p={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},d.useReducer((e,t)=>p[e][t]??e,m));var m,p;return d.useEffect(()=>{if("idle"===u){const e=window.setTimeout(()=>h("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,a.scrollHideDelay,h]),d.useEffect(()=>{const e=a.viewport,t=i?"scrollLeft":"scrollTop";if(e){let r=e[t];const s=()=>{const s=e[t];r!==s&&(h("SCROLL"),c()),r=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[a.viewport,i,h,c]),r.jsx(n,{present:s||"hidden"!==u,children:r.jsx(ae,{"data-state":"hidden"===u?"hidden":"visible",...l,ref:t,onPointerEnter:o(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:o(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),oe=d.forwardRef((e,t)=>{const s=Q(re,e.__scopeScrollArea),{forceMount:l,...o}=e,[a,i]=d.useState(!1),c="horizontal"===e.orientation,u=Te(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;i(c?e:t)}},10);return Ee(s.viewport,u),Ee(s.content,u),r.jsx(n,{present:l||a,children:r.jsx(ae,{"data-state":a?"visible":"hidden",...o,ref:t})})}),ae=d.forwardRef((e,t)=>{const{orientation:s="vertical",...l}=e,n=Q(re,e.__scopeScrollArea),o=d.useRef(null),a=d.useRef(0),[i,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=be(i.viewport,i.content),h={...l,sizes:i,onSizesChange:c,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:e=>a.current=e};function m(e,t){return function(e,t,r,s="ltr"){const l=we(r),n=l/2,o=t||n,a=l-o,i=r.scrollbar.paddingStart+o,c=r.scrollbar.size-r.scrollbar.paddingEnd-a,d=r.content-r.viewport,u="ltr"===s?[0,d]:[-1*d,0];return Ne([i,c],u)(e)}(e,a.current,i,t)}return"horizontal"===s?r.jsx(ie,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&o.current){const e=ye(n.viewport.scrollLeft,i,n.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=m(e,n.dir))}}):"vertical"===s?r.jsx(ce,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&o.current){const e=ye(n.viewport.scrollTop,i);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=m(e))}}):null}),ie=d.forwardRef((t,s)=>{const{sizes:l,onSizesChange:n,...o}=t,a=Q(re,t.__scopeScrollArea),[i,c]=d.useState(),u=d.useRef(null),h=e(s,u,a.onScrollbarXChange);return d.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),r.jsx(he,{"data-orientation":"horizontal",...o,ref:h,sizes:l,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":we(l)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.x),onDragScroll:e=>t.onDragScroll(e.x),onWheelScroll:(e,r)=>{if(a.viewport){const s=a.viewport.scrollLeft+e.deltaX;t.onWheelScroll(s),Se(s,r)&&e.preventDefault()}},onResize:()=>{u.current&&a.viewport&&i&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:je(i.paddingLeft),paddingEnd:je(i.paddingRight)}})}})}),ce=d.forwardRef((t,s)=>{const{sizes:l,onSizesChange:n,...o}=t,a=Q(re,t.__scopeScrollArea),[i,c]=d.useState(),u=d.useRef(null),h=e(s,u,a.onScrollbarYChange);return d.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),r.jsx(he,{"data-orientation":"vertical",...o,ref:h,sizes:l,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":we(l)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.y),onDragScroll:e=>t.onDragScroll(e.y),onWheelScroll:(e,r)=>{if(a.viewport){const s=a.viewport.scrollTop+e.deltaY;t.onWheelScroll(s),Se(s,r)&&e.preventDefault()}},onResize:()=>{u.current&&a.viewport&&i&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:je(i.paddingTop),paddingEnd:je(i.paddingBottom)}})}})}),[de,ue]=G(re),he=d.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:i,hasThumb:c,onThumbChange:u,onThumbPointerUp:h,onThumbPointerDown:m,onThumbPositionChange:p,onDragScroll:x,onWheelScroll:f,onResize:g,...v}=t,j=Q(re,n),[b,w]=d.useState(null),y=e(s,e=>w(e)),N=d.useRef(null),S=d.useRef(""),C=j.viewport,T=i.content-i.viewport,E=a(f),A=a(p),R=Te(g,10);function D(e){if(N.current){const t=e.clientX-N.current.left,r=e.clientY-N.current.top;x({x:t,y:r})}}return d.useEffect(()=>{const e=e=>{const t=e.target;(null==b?void 0:b.contains(t))&&E(e,T)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[C,b,T,E]),d.useEffect(A,[i,A]),Ee(b,R),Ee(j.content,R),r.jsx(de,{scope:n,scrollbar:b,hasThumb:c,onThumbChange:a(u),onThumbPointerUp:a(h),onThumbPositionChange:A,onThumbPointerDown:a(m),children:r.jsx(l.div,{...v,ref:y,style:{position:"absolute",...v.style},onPointerDown:o(t.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),N.current=b.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),D(e)}}),onPointerMove:o(t.onPointerMove,D),onPointerUp:o(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,j.viewport&&(j.viewport.style.scrollBehavior=""),N.current=null})})})}),me="ScrollAreaThumb",pe=d.forwardRef((e,t)=>{const{forceMount:s,...l}=e,o=ue(me,e.__scopeScrollArea);return r.jsx(n,{present:s||o.hasThumb,children:r.jsx(xe,{ref:t,...l})})}),xe=d.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:a,...i}=t,c=Q(me,n),u=ue(me,n),{onThumbPositionChange:h}=u,m=e(s,e=>u.onThumbChange(e)),p=d.useRef(void 0),x=Te(()=>{p.current&&(p.current(),p.current=void 0)},100);return d.useEffect(()=>{const e=c.viewport;if(e){const t=()=>{if(x(),!p.current){const t=Ce(e,h);p.current=t,h()}};return h(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[c.viewport,x,h]),r.jsx(l.div,{"data-state":u.hasThumb?"visible":"hidden",...i,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:o(t.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top;u.onThumbPointerDown({x:r,y:s})}),onPointerUp:o(t.onPointerUp,u.onThumbPointerUp)})});pe.displayName=me;var fe="ScrollAreaCorner",ge=d.forwardRef((e,t)=>{const s=Q(fe,e.__scopeScrollArea),l=Boolean(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&l?r.jsx(ve,{...e,ref:t}):null});ge.displayName=fe;var ve=d.forwardRef((e,t)=>{const{__scopeScrollArea:s,...n}=e,o=Q(fe,s),[a,i]=d.useState(0),[c,u]=d.useState(0),h=Boolean(a&&c);return Ee(o.scrollbarX,()=>{var e;const t=(null==(e=o.scrollbarX)?void 0:e.offsetHeight)||0;o.onCornerHeightChange(t),u(t)}),Ee(o.scrollbarY,()=>{var e;const t=(null==(e=o.scrollbarY)?void 0:e.offsetWidth)||0;o.onCornerWidthChange(t),i(t)}),h?r.jsx(l.div,{...n,ref:t,style:{width:a,height:c,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0,...e.style}}):null});function je(e){return e?parseInt(e,10):0}function be(e,t){const r=e/t;return isNaN(r)?0:r}function we(e){const t=be(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function ye(e,t,r="ltr"){const s=we(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-l,o=t.content-t.viewport,a=n-s,i=c(e,"ltr"===r?[0,o]:[-1*o,0]);return Ne([0,o],[0,a])(i)}function Ne(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function Se(e,t){return e>0&&e<t}var Ce=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function l(){const n={left:e.scrollLeft,top:e.scrollTop},o=r.left!==n.left,a=r.top!==n.top;(o||a)&&t(),r=n,s=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(s)};function Te(e,t){const r=a(e),s=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(s.current),[]),d.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Ee(e,t){const r=a(t);i(()=>{let t=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.unobserve(e)}}},[e,r])}var Ae=J,Re=te,De=ge;function Le({className:e,children:t,...s}){return r.jsxs(Ae,{"data-slot":"scroll-area",className:h("relative",e),...s,children:[r.jsx(Re,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),r.jsx(Pe,{}),r.jsx(De,{})]})}function Pe({className:e,orientation:t="vertical",...s}){return r.jsx(se,{"data-slot":"scroll-area-scrollbar",orientation:t,className:h("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:r.jsx(pe,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function _e({open:e,onOpenChange:t}){const{selectedForComparison:s,getCalculationById:l,toggleComparisonSelection:n}=u(),o=d.useMemo(()=>s.map(e=>l(e)).filter(Boolean),[s,l]),a=d.useMemo(()=>{const e=new Set;return o.forEach(t=>{t&&(Object.keys(t.results).forEach(t=>e.add(t)),Object.keys(t.inputs).forEach(t=>e.add(`input_${t}`)))}),Array.from(e)},[o]),i=e=>null==e?"N/A":"number"==typeof e?Number.isInteger(e)?e.toLocaleString():e.toLocaleString(void 0,{maximumFractionDigits:2}):"boolean"==typeof e?e?"Yes":"No":e instanceof Date?e.toLocaleDateString():String(e),c=e=>(e.startsWith("input_")?e.substring(6):e).replace(/([A-Z])/g," $1").replace(/_/g," ").trim().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),h=e=>e.startsWith("input_")?"input":"result",b=a.filter(e=>"input"===h(e)),w=a.filter(e=>"result"===h(e));return r.jsx(m,{open:e,onOpenChange:t,children:r.jsxs(p,{className:"max-w-6xl max-h-[90vh]",children:[r.jsxs(x,{children:[r.jsxs(f,{className:"flex items-center gap-2",children:[r.jsx(O,{className:"w-5 h-5"}),"Compare Calculations (",o.length,")"]}),r.jsx(g,{children:"Side-by-side comparison of your selected calculations"})]}),r.jsx(Le,{className:"h-[calc(90vh-120px)] pr-4",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${Math.min(o.length,3)}, 1fr)`},children:o.slice(0,3).map(e=>{return e?r.jsxs(v,{className:"p-4 relative",children:[r.jsx(j,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-8 w-8 p-0",onClick:()=>n(e.id),children:r.jsx(H,{className:"w-4 h-4"})}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("h3",{className:"font-semibold text-lg pr-8",children:e.calculatorName}),r.jsx(E,{variant:"outline",children:e.calculatorType}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[r.jsx(M,{className:"w-3 h-3"}),(t=e.timestamp,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]},e.id):null;var t})}),o.length>3&&r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing first 3 of ",o.length," selected calculations"]}),r.jsx(z,{}),b.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[r.jsx(I,{className:"w-4 h-4"}),"Input Parameters"]}),r.jsx("div",{className:"space-y-2",children:b.map(e=>r.jsxs("div",{className:"grid gap-4 p-3 bg-muted/50 rounded-lg",style:{gridTemplateColumns:`200px repeat(${Math.min(o.length,3)}, 1fr)`},children:[r.jsx("div",{className:"font-medium text-sm flex items-center",children:c(e)}),o.slice(0,3).map(t=>{if(!t)return null;const s=e.substring(6),l=t.inputs[s];return r.jsx("div",{className:"text-sm",children:i(l)},t.id)})]},e))})]}),w.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[r.jsx(O,{className:"w-4 h-4"}),"Results"]}),r.jsx("div",{className:"space-y-2",children:w.map(e=>{const t=o.slice(0,3).map(t=>null==t?void 0:t.results[e]),s=t.every(e=>"number"==typeof e)&&new Set(t).size>1;return r.jsxs("div",{className:"grid gap-4 p-3 rounded-lg "+(s?"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900":"bg-muted/50"),style:{gridTemplateColumns:`200px repeat(${Math.min(o.length,3)}, 1fr)`},children:[r.jsx("div",{className:"font-medium text-sm flex items-center",children:c(e)}),o.slice(0,3).map(t=>{if(!t)return null;const s=t.results[e];return r.jsx("div",{className:"text-sm font-semibold",children:i(s)},t.id)})]},e)})})]}),o.some(e=>null==e?void 0:e.notes)&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Notes"}),r.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${Math.min(o.length,3)}, 1fr)`},children:o.slice(0,3).map(e=>e?r.jsx(v,{className:"p-4",children:e.notes?r.jsx("p",{className:"text-sm text-muted-foreground",children:e.notes}):r.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No notes"})},e.id):null)})]})]})})]})})}function ke(){const{history:e,deleteCalculation:t,deleteMultiple:s,clearHistory:l,toggleFavorite:n,updateNotes:o,updateTags:a,toggleComparisonSelection:i,selectedForComparison:c,exportHistory:h}=u(),{toast:z}=b(),[H,I]=d.useState(""),[Z,G]=d.useState("all"),[K,Q]=d.useState(!1),[J,ee]=d.useState("recent"),[te,re]=d.useState([]),[se,le]=d.useState(!1),[ne,oe]=d.useState(!1),[ae,ie]=d.useState(null),[ce,de]=d.useState(!1),ue=d.useMemo(()=>{const t=new Set(e.map(e=>e.calculatorType));return Array.from(t).sort()},[e]),he=d.useMemo(()=>{let t=e;if(H){const e=H.toLowerCase();t=t.filter(t=>{var r,s;return t.calculatorName.toLowerCase().includes(e)||(null==(r=t.notes)?void 0:r.toLowerCase().includes(e))||(null==(s=t.tags)?void 0:s.some(t=>t.toLowerCase().includes(e)))})}"all"!==Z&&(t=t.filter(e=>e.calculatorType===Z)),K&&(t=t.filter(e=>e.favorite));return[...t].sort((e,t)=>"recent"===J?t.timestamp-e.timestamp:"oldest"===J?e.timestamp-t.timestamp:e.calculatorName.localeCompare(t.calculatorName))},[e,H,Z,K,J]);return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20",children:[r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(W,{className:"w-8 h-8 text-primary"}),r.jsx("h1",{className:"text-4xl font-bold",children:"Calculation History"})]}),r.jsx("p",{className:"text-muted-foreground",children:"View, compare, and manage all your saved calculations"})]}),r.jsxs("div",{className:"mb-6 space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),r.jsx(w,{placeholder:"Search calculations, notes, or tags...",value:H,onChange:e=>I(e.target.value),className:"pl-10"})]}),r.jsxs(R,{value:Z,onValueChange:e=>G(e),children:[r.jsxs(D,{className:"w-full md:w-[200px]",children:[r.jsx(U,{className:"w-4 h-4 mr-2"}),r.jsx(L,{placeholder:"Filter by type"})]}),r.jsxs(P,{children:[r.jsx(_,{value:"all",children:"All Types"}),ue.map(e=>r.jsx(_,{value:e,children:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},e))]})]}),r.jsxs(R,{value:J,onValueChange:e=>ee(e),children:[r.jsx(D,{className:"w-full md:w-[180px]",children:r.jsx(L,{placeholder:"Sort by"})}),r.jsxs(P,{children:[r.jsx(_,{value:"recent",children:"Most Recent"}),r.jsx(_,{value:"oldest",children:"Oldest First"}),r.jsx(_,{value:"name",children:"Name (A-Z)"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(j,{variant:K?"default":"outline",size:"sm",onClick:()=>Q(!K),children:[r.jsx(Y,{className:"w-4 h-4 mr-2 "+(K?"fill-current":"")}),"Favorites Only"]}),te.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs(j,{variant:"outline",size:"sm",onClick:()=>le(!0),children:[r.jsx(X,{className:"w-4 h-4 mr-2"}),"Delete (",te.length,")"]}),r.jsx(j,{variant:"outline",size:"sm",onClick:()=>re([]),children:"Clear Selection"})]}),r.jsxs("div",{className:"ml-auto flex gap-2",children:[c.length>=2&&r.jsxs(j,{variant:"default",size:"sm",onClick:()=>de(!0),children:[r.jsx(O,{className:"w-4 h-4 mr-2"}),"Compare (",c.length,")"]}),r.jsxs(j,{variant:"outline",size:"sm",onClick:()=>{try{const t=h(),r=`data:application/json;charset=utf-8,${encodeURIComponent(t)}`,s=`calculator-history-${(new Date).toISOString().split("T")[0]}.json`,l=document.createElement("a");l.setAttribute("href",r),l.setAttribute("download",s),l.click(),z({title:"History exported!",description:`${e.length} calculations exported successfully.`})}catch(t){z({title:"Export failed",description:"Failed to export history. Please try again.",variant:"destructive"})}},children:[r.jsx(B,{className:"w-4 h-4 mr-2"}),"Export"]}),e.length>0&&r.jsx(j,{variant:"destructive",size:"sm",onClick:()=>oe(!0),children:"Clear All"})]})]})]}),he.length>0&&r.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r.jsx(A,{checked:te.length===he.length&&he.length>0,onCheckedChange:()=>{te.length===he.length?re([]):re(he.map(e=>e.id))}}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Select All (",he.length," results)"]})]}),0===he.length?r.jsxs(v,{className:"p-12 text-center",children:[r.jsx(W,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No calculations found"}),r.jsx("p",{className:"text-muted-foreground",children:0===e.length?"Start using calculators to build your history":"Try adjusting your filters or search query"})]}):r.jsx("div",{className:"grid gap-4",children:he.map(e=>{return r.jsx(v,{className:"p-4 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(A,{checked:te.includes(e.id),onCheckedChange:()=>{return t=e.id,void re(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}}),r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"text-lg font-semibold",children:e.calculatorName}),r.jsx(E,{variant:"outline",className:"text-xs",children:e.calculatorType}),e.favorite&&r.jsx(Y,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(M,{className:"w-3 h-3"}),(l=e.timestamp,new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),r.jsxs(y,{children:[r.jsx(N,{asChild:!0,children:r.jsx(j,{variant:"ghost",size:"sm",children:r.jsx($,{className:"w-4 h-4"})})}),r.jsxs(S,{align:"end",children:[r.jsxs(C,{onClick:()=>n(e.id),children:[r.jsx(Y,{className:"w-4 h-4 mr-2"}),e.favorite?"Unfavorite":"Favorite"]}),r.jsxs(C,{onClick:()=>ie(e),children:[r.jsx(V,{className:"w-4 h-4 mr-2"}),"Edit Notes"]}),r.jsxs(C,{onClick:()=>i(e.id),children:[r.jsx(O,{className:"w-4 h-4 mr-2"}),c.includes(e.id)?"Remove from Comparison":"Add to Comparison"]}),r.jsxs(C,{onClick:()=>t(e.id),className:"text-destructive",children:[r.jsx(X,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-4 p-3 bg-muted/50 rounded-lg",children:(s=e.results,Object.entries(s).slice(0,3).map(([e,t])=>{const s=e.replace(/([A-Z])/g," $1").trim();return r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{className:"text-muted-foreground",children:[s,":"]})," ",r.jsx("span",{className:"font-medium",children:String(t)})]},e)}))}),e.notes&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-900",children:r.jsx("p",{className:"text-sm",children:e.notes})}),e.tags&&e.tags.length>0&&r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(q,{className:"w-3 h-3 text-muted-foreground"}),e.tags.map((e,t)=>r.jsx(E,{variant:"secondary",className:"text-xs",children:e},t))]})]})]})},e.id);var s,l})})]}),r.jsx(m,{open:se,onOpenChange:le,children:r.jsxs(p,{children:[r.jsxs(x,{children:[r.jsx(f,{children:"Delete Selected Calculations"}),r.jsxs(g,{children:["Are you sure you want to delete ",te.length," calculation(s)? This action cannot be undone."]})]}),r.jsxs(T,{children:[r.jsx(j,{variant:"outline",onClick:()=>le(!1),children:"Cancel"}),r.jsx(j,{variant:"destructive",onClick:()=>{te.length>0&&(s(te),re([]),le(!1))},children:"Delete"})]})]})}),r.jsx(m,{open:ne,onOpenChange:oe,children:r.jsxs(p,{children:[r.jsxs(x,{children:[r.jsx(f,{children:"Clear All History"}),r.jsx(g,{children:"Are you sure you want to delete all calculation history? This action cannot be undone."})]}),r.jsxs(T,{children:[r.jsx(j,{variant:"outline",onClick:()=>oe(!1),children:"Cancel"}),r.jsx(j,{variant:"destructive",onClick:()=>{l(),re([]),oe(!1)},children:"Clear All"})]})]})}),r.jsx(m,{open:!!ae,onOpenChange:e=>!e&&ie(null),children:r.jsxs(p,{children:[r.jsxs(x,{children:[r.jsx(f,{children:"Edit Notes"}),r.jsx(g,{children:"Add notes to help you remember this calculation"})]}),ae&&r.jsx("div",{className:"space-y-4",children:r.jsx(k,{placeholder:"Add your notes here...",defaultValue:ae.notes||"",id:"notes-input",rows:4})}),r.jsxs(T,{children:[r.jsx(j,{variant:"outline",onClick:()=>ie(null),children:"Cancel"}),r.jsx(j,{onClick:()=>{var e;const t=null==(e=document.getElementById("notes-input"))?void 0:e.value;ae&&((e,t)=>{o(e,t),ie(null)})(ae.id,t)},children:"Save"})]})]})}),r.jsx(_e,{open:ce,onOpenChange:de})]})}export{ke as default};
